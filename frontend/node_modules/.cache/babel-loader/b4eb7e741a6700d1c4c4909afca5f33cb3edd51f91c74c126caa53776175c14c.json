{"ast":null,"code":"import _objectSpread from\"/root/app/salary-6/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useContext,useEffect}from'react';import{useNavigate}from'react-router-dom';import{AuthContext}from'../components/AuthProvider';import NavBar from'../components/NavBar';import{motion,AnimatePresence}from'framer-motion';import axios from'axios';import{DateTime}from'luxon';import*as XLSX from'xlsx';import{Document,Packer,Paragraph,Table,TableCell,TableRow,WidthType,TextRun}from'docx';import{saveAs}from'file-saver';import{SettingsIcon}from'lucide-react';// مكون علامة الصح (تم إزالة الخلفية الشفافة)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SuccessCheckmark=_ref=>{let{onComplete}=_ref;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.5},animate:{opacity:1,scale:1,transition:{duration:0.5}},exit:{opacity:0,scale:0.5},onAnimationComplete:onComplete,className:\"fixed inset-0 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsx(motion.div,{animate:{scale:[1,1.1,1],transition:{duration:1.5,repeat:Infinity,repeatType:'loop'}},className:\"bg-gradient-to-br from-green-400 to-emerald-300 p-8 rounded-full shadow-lg w-28 h-28 sm:w-32 sm:h-32 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-16 h-16 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(motion.path,{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"3\",d:\"M5 13l4 4L19 7\",initial:{pathLength:0},animate:{pathLength:1,transition:{duration:0.8}}})})})});};// مكون مؤشر التحميل\nconst LoadingSpinner=()=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(motion.div,{className:\"w-12 h-12 sm:w-16 sm:h-16 border-4 border-t-transparent border-sky-400 rounded-full\",animate:{rotate:360},transition:{duration:1,repeat:Infinity,ease:'linear'}}),/*#__PURE__*/_jsx(\"span\",{className:\"absolute inset-0 flex items-center justify-center text-gray-200 text-sm sm:text-base\",children:\"\\u062C\\u0627\\u0631\\u064D \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"})]})});const MonthlyBonusReport=()=>{const{user}=useContext(AuthContext);const navigate=useNavigate();const[searchCode,setSearchCode]=useState('');const[dateFrom,setDateFrom]=useState('');const[dateTo,setDateTo]=useState('');const[users,setUsers]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[showSuccess,setShowSuccess]=useState(false);const[editingUser,setEditingUser]=useState(null);const[editForm,setEditForm]=useState({});useEffect(()=>{if(!user||user.role!=='admin'){navigate('/login');}},[user,navigate]);const triggerSuccessAnimation=()=>{setShowSuccess(true);setTimeout(()=>setShowSuccess(false),3000);};const calculateNetBonus=(user,absences,tieUpValue,productionValue,advances,deductions)=>{const baseBonus=Number(user.baseBonus||0);const bonusPercentage=Number(user.bonusPercentage||0);const bonus=baseBonus*(bonusPercentage/100);const dailyBonus=bonus/30;const absenceDeduction=absences*dailyBonus;const adjustedBonus=bonus-absenceDeduction;const netBonus=adjustedBonus-Number(advances)-Number(deductions)+Number(tieUpValue)+Number(productionValue);return netBonus.toFixed(2);};const handleSearch=async()=>{if(!searchCode||!dateFrom||!dateTo){setError('يرجى إدخال كود الموظف وتاريخ البداية والنهاية');return;}const startDate=DateTime.fromISO(dateFrom,{zone:'Africa/Cairo'});const endDate=DateTime.fromISO(dateTo,{zone:'Africa/Cairo'});if(!startDate.isValid||!endDate.isValid){setError('تاريخ البداية أو النهاية غير صالح');return;}if(startDate>endDate){setError('تاريخ البداية يجب أن يكون قبل تاريخ النهاية');return;}setLoading(true);setError('');try{const[userRes,fingerprintRes]=await Promise.all([axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/users\"),{params:{code:searchCode},headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/fingerprints\"),{params:{code:searchCode,dateFrom,dateTo},headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}})]);const userData=Array.isArray(userRes.data.users)?userRes.data.users:[userRes.data];const userFingerprints=fingerprintRes.data.reports||[];const combinedData=userData.map(user=>{const userFingerprints=fingerprintRes.data.reports.filter(fp=>fp.code===user.code);const totals=userFingerprints.reduce((acc,fp)=>{const isWeeklyLeave=workDaysPerWeek=>{const dayOfWeek=DateTime.fromISO(fp.date,{zone:'Africa/Cairo'}).weekday;return workDaysPerWeek===5&&(dayOfWeek===5||dayOfWeek===6)||workDaysPerWeek===6&&dayOfWeek===5;};const isWorkDay=!isWeeklyLeave(user.workDaysPerWeek||6)&&fp.absence==='لا'&&fp.annualLeave==='لا'&&fp.medicalLeave==='لا'&&fp.officialLeave==='لا'&&Number(fp.leaveCompensation)===0;const isAbsenceDay=fp.absence==='نعم';acc.totalWorkDays+=isWorkDay?1:0;acc.absences+=isAbsenceDay?1:0;acc.annualLeave+=fp.annualLeave==='نعم'?1:0;acc.totalLeaveDays+=(fp.annualLeave==='نعم'?1:0)+(fp.medicalLeave==='نعم'?1:0)+(fp.officialLeave==='نعم'?1:0)+(Number(fp.leaveCompensation)>0?1:0);return acc;},{totalWorkDays:0,absences:0,annualLeave:0,totalLeaveDays:0});return _objectSpread(_objectSpread({},user),{},{totalWorkDays:totals.totalWorkDays,absences:totals.absences,annualLeave:totals.annualLeave,totalLeaveDays:totals.totalLeaveDays,tieUpValue:0,productionValue:0,advances:user.advances||0,deductions:0,netBonus:calculateNetBonus(user,totals.absences,0,0,user.advances||0,0)});});setUsers(combinedData);triggerSuccessAnimation();}catch(err){var _err$response,_err$response$data;const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message;console.error('Error fetching data:',errorMsg);setError(\"\\u062E\\u0637\\u0623 \\u0623\\u062B\\u0646\\u0627\\u0621 \\u062C\\u0644\\u0628 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A: \".concat(errorMsg));setUsers([]);}finally{setLoading(false);}};const handleShowAll=async()=>{if(!dateFrom||!dateTo){setError('يرجى تحديد تاريخ البداية والنهاية');return;}const startDate=DateTime.fromISO(dateFrom,{zone:'Africa/Cairo'});const endDate=DateTime.fromISO(dateTo,{zone:'Africa/Cairo'});if(!startDate.isValid||!endDate.isValid){setError('تاريخ البداية أو النهاية غير صالح');return;}if(startDate>endDate){setError('تاريخ البداية يجب أن يكون قبل تاريخ النهاية');return;}setLoading(true);setError('');try{const[userRes,fingerprintRes]=await Promise.all([axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/users\"),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}),axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/fingerprints\"),{params:{dateFrom,dateTo},headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}})]);const userData=Array.isArray(userRes.data.users)?userRes.data.users:userRes.data;const fingerprintData=fingerprintRes.data.reports||[];const combinedData=userData.map(user=>{const userFingerprints=fingerprintData.filter(fp=>fp.code===user.code);const totals=userFingerprints.reduce((acc,fp)=>{const isWeeklyLeave=workDaysPerWeek=>{const dayOfWeek=DateTime.fromISO(fp.date,{zone:'Africa/Cairo'}).weekday;return workDaysPerWeek===5&&(dayOfWeek===5||dayOfWeek===6)||workDaysPerWeek===6&&dayOfWeek===5;};const isWorkDay=!isWeeklyLeave(user.workDaysPerWeek||6)&&fp.absence==='لا'&&fp.annualLeave==='لا'&&fp.medicalLeave==='لا'&&fp.officialLeave==='لا'&&Number(fp.leaveCompensation)===0;const isAbsenceDay=fp.absence==='نعم';acc.totalWorkDays+=isWorkDay?1:0;acc.absences+=isAbsenceDay?1:0;acc.annualLeave+=fp.annualLeave==='نعم'?1:0;acc.totalLeaveDays+=(fp.annualLeave==='نعم'?1:0)+(fp.medicalLeave==='نعم'?1:0)+(fp.officialLeave==='نعم'?1:0)+(Number(fp.leaveCompensation)>0?1:0);return acc;},{totalWorkDays:0,absences:0,annualLeave:0,totalLeaveDays:0});return _objectSpread(_objectSpread({},user),{},{totalWorkDays:totals.totalWorkDays,absences:totals.absences,annualLeave:totals.annualLeave,totalLeaveDays:totals.totalLeaveDays,tieUpValue:0,productionValue:0,advances:user.advances||0,deductions:0,netBonus:calculateNetBonus(user,totals.absences,0,0,user.advances||0,0)});});setUsers(combinedData);setSearchCode('');triggerSuccessAnimation();}catch(err){var _err$response2,_err$response2$data;const errorMsg=((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||err.message;console.error('Error fetching all data:',errorMsg);setError(\"\\u062E\\u0637\\u0623 \\u0623\\u062B\\u0646\\u0627\\u0621 \\u062C\\u0644\\u0628 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A: \".concat(errorMsg));setUsers([]);}finally{setLoading(false);}};const handleEditClick=userData=>{setEditingUser(userData);setEditForm({code:userData.code,tieUpValue:userData.tieUpValue||'0.00',productionValue:userData.productionValue||'0.00',advances:userData.advances||'0.00',deductions:userData.deductions||'0.00',netBonus:calculateNetBonus(userData,userData.absences,userData.tieUpValue||0,userData.productionValue||0,userData.advances||0,userData.deductions||0)});setError('');};const handleEditChange=e=>{const{name,value}=e.target;setEditForm(prev=>{const updatedForm=_objectSpread(_objectSpread({},prev),{},{[name]:value});const netBonus=calculateNetBonus(editingUser,editingUser.absences,updatedForm.tieUpValue,updatedForm.productionValue,updatedForm.advances,updatedForm.deductions);return _objectSpread(_objectSpread({},updatedForm),{},{netBonus});});};const handleEditSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{if(Number(editForm.tieUpValue)<0){setError('قيمة التربات لا يمكن أن تكون سالبة');setLoading(false);return;}if(Number(editForm.productionValue)<0){setError('قيمة الإنتاج لا يمكن أن تكون سالبة');setLoading(false);return;}if(Number(editForm.advances)<0){setError('السلف لا يمكن أن تكون سالبة');setLoading(false);return;}if(Number(editForm.deductions)<0){setError('الاستقطاعات لا يمكن أن تكون سالبة');setLoading(false);return;}await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/monthly-bonus-report/\").concat(editForm.code),{code:editForm.code,tieUpValue:Number(editForm.tieUpValue),productionValue:Number(editForm.productionValue),advances:Number(editForm.advances),deductions:Number(editForm.deductions),netBonus:Number(editForm.netBonus),dateFrom,dateTo,createdBy:user._id},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setUsers(prev=>prev.map(u=>u.code===editForm.code?_objectSpread(_objectSpread({},u),{},{tieUpValue:Number(editForm.tieUpValue),productionValue:Number(editForm.productionValue),advances:Number(editForm.advances),deductions:Number(editForm.deductions),netBonus:editForm.netBonus}):u));setEditingUser(null);triggerSuccessAnimation();}catch(err){var _err$response3,_err$response3$data;const errorMsg=((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||err.message;console.error('Error updating report:',errorMsg);setError(\"\\u062E\\u0637\\u0623 \\u0623\\u062B\\u0646\\u0627\\u0621 \\u0627\\u0644\\u062A\\u0639\\u062F\\u064A\\u0644: \".concat(errorMsg));}finally{setLoading(false);}};const handleEditCancel=()=>{setEditingUser(null);setEditForm({});setError('');};const handleSaveReport=async()=>{setLoading(true);setError('');try{await Promise.all(users.map(user=>axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/monthly-bonus-report\"),{code:user.code,employeeName:user.employeeName,department:user.department,baseBonus:Number(user.baseBonus),bonusPercentage:Number(user.bonusPercentage),workDaysPerWeek:Number(user.workDaysPerWeek),totalWorkDays:Number(user.totalWorkDays),absences:Number(user.absences),annualLeave:Number(user.annualLeave),totalLeaveDays:Number(user.totalLeaveDays),tieUpValue:Number(user.tieUpValue),productionValue:Number(user.productionValue),advances:Number(user.advances),deductions:Number(user.deductions),netBonus:Number(user.netBonus),dateFrom,dateTo,createdBy:user._id},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}})));triggerSuccessAnimation();}catch(err){var _err$response4,_err$response4$data;const errorMsg=((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.error)||err.message;console.error('Error saving report:',errorMsg);setError(\"\\u062E\\u0637\\u0623 \\u0623\\u062B\\u0646\\u0627\\u0621 \\u062D\\u0641\\u0638 \\u0627\\u0644\\u062A\\u0642\\u0631\\u064A\\u0631: \".concat(errorMsg));}finally{setLoading(false);}};const handleExportExcel=()=>{const headers=['كود الموظف','الاسم','القسم','الحافز الأساسي','نسبة الحافز','أيام العمل الأسبوعية','إجمالي أيام العمل','الغياب','الإجازة السنوية','إجمالي الإجازات','قيمة التربات','قيمة الإنتاج','السلف','الاستقطاعات','صافي الحافز'];const data=users.map(user=>[user.code,user.employeeName,user.department,Number(user.baseBonus||0).toFixed(2),\"\".concat(Number(user.bonusPercentage||0).toFixed(2),\"%\"),user.workDaysPerWeek,user.totalWorkDays,user.absences,user.annualLeave,user.totalLeaveDays,Number(user.tieUpValue||0).toFixed(2),Number(user.productionValue||0).toFixed(2),Number(user.advances||0).toFixed(2),Number(user.deductions||0).toFixed(2),user.netBonus]);const worksheet=XLSX.utils.aoa_to_sheet([headers,...data]);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,worksheet,'تقرير الحافز الشهري');worksheet['!cols']=headers.map(()=>({wch:15}));worksheet['!rtl']=true;XLSX.writeFile(wb,\"\\u062A\\u0642\\u0631\\u064A\\u0631_\\u0627\\u0644\\u062D\\u0627\\u0641\\u0632_\\u0627\\u0644\\u0634\\u0647\\u0631\\u064A_\".concat(dateFrom,\"_\\u0625\\u0644\\u0649_\").concat(dateTo,\".xlsx\"));};const handleExportWord=async()=>{const doc=new Document({sections:[{properties:{page:{margin:{left:720,right:720,top:720,bottom:720}}},children:[new Paragraph({children:[new TextRun({text:'تقرير الحافز الشهري',bold:true,size:24,font:'Amiri',rightToLeft:true})],alignment:'right',spacing:{after:200}}),new Paragraph({children:[new TextRun({text:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E: \\u0645\\u0646 \".concat(DateTime.fromISO(dateFrom).toLocaleString(DateTime.DATE_FULL,{locale:'ar'}),\" \\u0625\\u0644\\u0649 \").concat(DateTime.fromISO(dateTo).toLocaleString(DateTime.DATE_FULL,{locale:'ar'})),size:20,font:'Amiri',rightToLeft:true})],alignment:'right',spacing:{after:400}}),new Table({width:{size:100,type:WidthType.PERCENTAGE},rows:[new TableRow({children:['كود الموظف','الاسم','القسم','الحافز الأساسي','نسبة الحافز','أيام العمل الأسبوعية','إجمالي أيام العمل','الغياب','الإجازة السنوية','إجمالي الإجازات','قيمة التربات','قيمة الإنتاج','السلف','الاستقطاعات','صافي الحافز'].map(header=>new TableCell({children:[new Paragraph({children:[new TextRun({text:header,bold:true,font:'Amiri',size:20,rightToLeft:true})],alignment:'center'})],width:{size:100/15,type:WidthType.PERCENTAGE},margins:{top:100,bottom:100,left:100,right:100}}))}),...users.map(user=>new TableRow({children:[user.code,user.employeeName,user.department,Number(user.baseBonus||0).toFixed(2),\"\".concat(Number(user.bonusPercentage||0).toFixed(2),\"%\"),user.workDaysPerWeek.toString(),user.totalWorkDays.toString(),user.absences.toString(),user.annualLeave.toString(),user.totalLeaveDays.toString(),Number(user.tieUpValue||0).toFixed(2),Number(user.productionValue||0).toFixed(2),Number(user.advances||0).toFixed(2),Number(user.deductions||0).toFixed(2),user.netBonus].map(text=>new TableCell({children:[new Paragraph({children:[new TextRun({text,font:'Amiri',size:20,rightToLeft:true})],alignment:'center'})],width:{size:100/15,type:WidthType.PERCENTAGE},margins:{top:100,bottom:100,left:100,right:100}}))}))]})]}]});const blob=await Packer.toBlob(doc);saveAs(blob,\"\\u062A\\u0642\\u0631\\u064A\\u0631_\\u0627\\u0644\\u062D\\u0627\\u0641\\u0632_\\u0627\\u0644\\u0634\\u0647\\u0631\\u064A_\".concat(dateFrom,\"_\\u0625\\u0644\\u0649_\").concat(dateTo,\".docx\"));};if(!user||user.role!=='admin')return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 flex flex-col\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4 sm:p-6 max-w-full\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:loading&&/*#__PURE__*/_jsx(LoadingSpinner,{})}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.5},className:\"bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-200 mb-4 sm:mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-right flex items-center gap-2\",children:[/*#__PURE__*/_jsx(SettingsIcon,{className:\"h-6 w-6 text-blue-500\"}),\"\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632 \\u0627\\u0644\\u0634\\u0647\\u0631\\u064A\"]}),error&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:\"bg-red-50 text-red-600 p-3 sm:p-4 rounded-lg mb-4 sm:mb-6 text-right text-sm sm:text-base\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchCode,onChange:e=>setSearchCode(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\",placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0645\\u0646 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateFrom,onChange:e=>setDateFrom(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0625\\u0644\\u0649 \\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateTo,onChange:e=>setDateTo(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\",disabled:loading})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-end gap-2 sm:gap-4 mt-4\",children:[/*#__PURE__*/_jsx(motion.button,{onClick:handleSearch,disabled:loading,whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"w-full sm:w-auto bg-stone-700 text-white px-4 py-2 rounded-md hover:bg-stone-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-stone-700 \".concat(loading?'opacity-50 cursor-not-allowed':''),children:loading?'جارٍ البحث...':'بحث'}),/*#__PURE__*/_jsx(motion.button,{onClick:handleShowAll,disabled:loading,whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"w-full sm:w-auto bg-zinc-600 text-white px-4 py-2 rounded-md hover:bg-zinc-700 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-zinc-600 \".concat(loading?'opacity-50 cursor-not-allowed':''),children:loading?'جارٍ الجلب...':'عرض الكل'}),/*#__PURE__*/_jsx(motion.button,{onClick:handleExportExcel,disabled:loading||users.length===0,whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"w-full sm:w-auto bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-green-500 \".concat(loading||users.length===0?'opacity-50 cursor-not-allowed':''),children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0625\\u0643\\u0633\\u0644\"}),/*#__PURE__*/_jsx(motion.button,{onClick:handleExportWord,disabled:loading||users.length===0,whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"w-full sm:w-auto bg-blue-700 text-white px-4 py-2 rounded-md hover:bg-blue-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-blue-700 \".concat(loading||users.length===0?'opacity-50 cursor-not-allowed':''),children:\"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0648\\u0648\\u0631\\u062F\"})]})]}),/*#__PURE__*/_jsx(AnimatePresence,{children:editingUser&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,scale:0.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0.8},className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(motion.div,{className:\"bg-white p-4 sm:p-6 rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-right flex items-center gap-2\",children:[/*#__PURE__*/_jsx(SettingsIcon,{className:\"h-6 w-6 text-blue-500\"}),\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062A\\u0642\\u0631\\u064A\\u0631\"]}),error&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:\"bg-red-50 text-red-600 p-3 sm:p-4 rounded-lg mb-4 text-right text-sm sm:text-base\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"code\",value:editForm.code,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300 bg-gray-100\",readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0631\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"tieUpValue\",value:editForm.tieUpValue,onChange:handleEditChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\",min:\"0\",step:\"0.01\",required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u0625\\u0646\\u062A\\u0627\\u062C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"productionValue\",value:editForm.productionValue,onChange:handleEditChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\",min:\"0\",step:\"0.01\",required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0627\\u0644\\u0633\\u0644\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"advances\",value:editForm.advances,onChange:handleEditChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\",min:\"0\",step:\"0.01\",required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0627\\u0644\\u0627\\u0633\\u062A\\u0642\\u0637\\u0627\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"deductions\",value:editForm.deductions,onChange:handleEditChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\",min:\"0\",step:\"0.01\",required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-medium mb-2 text-right\",children:\"\\u0627\\u0644\\u0635\\u0627\\u0641\\u064A\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.netBonus,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300 bg-gray-100\",readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-end gap-2 sm:gap-4\",children:[/*#__PURE__*/_jsx(motion.button,{type:\"submit\",disabled:loading,whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"w-full sm:w-auto bg-stone-700 text-white px-4 py-2 rounded-md hover:bg-stone-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-stone-700 \".concat(loading?'opacity-50 cursor-not-allowed':''),children:loading?'جارٍ الحفظ...':'حفظ'}),/*#__PURE__*/_jsx(motion.button,{type:\"button\",onClick:handleEditCancel,disabled:loading,whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"w-full sm:w-auto bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-gray-500 \".concat(loading?'opacity-50 cursor-not-allowed':''),children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]})]})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:showSuccess&&/*#__PURE__*/_jsx(SuccessCheckmark,{onComplete:()=>setShowSuccess(false)})}),users.length>0&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},className:\"bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-right\",children:\"\\u062A\\u0642\\u0631\\u064A\\u0631 \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632 \\u0627\\u0644\\u0634\\u0647\\u0631\\u064A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto rounded-lg shadow-sm\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-right text-xs sm:text-sm border-collapse\",dir:\"rtl\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gradient-to-r from-blue-600 to-blue-400 text-white\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0643\\u0648\\u062F \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0627\\u0644\\u0627\\u0633\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0627\\u0644\\u0642\\u0633\\u0645\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0641\\u0632 \\u0627\\u0644\\u0623\\u0633\\u0627\\u0633\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0646\\u0633\\u0628\\u0629 \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0623\\u064A\\u0627\\u0645 \\u0627\\u0644\\u0639\\u0645\\u0644 \\u0627\\u0644\\u0623\\u0633\\u0628\\u0648\\u0639\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0623\\u064A\\u0627\\u0645 \\u0627\\u0644\\u0639\\u0645\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0627\\u0644\\u063A\\u064A\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0627\\u0632\\u0629 \\u0627\\u0644\\u0633\\u0646\\u0648\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u062C\\u0627\\u0632\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0631\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0642\\u064A\\u0645\\u0629 \\u0627\\u0644\\u0625\\u0646\\u062A\\u0627\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0627\\u0644\\u0633\\u0644\\u0641\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0627\\u0644\\u0627\\u0633\\u062A\\u0642\\u0637\\u0627\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0635\\u0627\\u0641\\u064A \\u0627\\u0644\\u062D\\u0627\\u0641\\u0632\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\",children:\"\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[users.map((user,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"\".concat(index%2===0?'bg-gray-50':'bg-white',\" hover:bg-blue-50 transition-colors duration-200 border-b border-gray-100\"),children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.code}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.employeeName}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.department}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:Number(user.baseBonus||0).toFixed(2)}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-3 text-gray-700\",children:[Number(user.bonusPercentage||0).toFixed(2),\"%\"]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.workDaysPerWeek}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.totalWorkDays}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.absences}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.annualLeave}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:user.totalLeaveDays}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:Number(user.tieUpValue||0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:Number(user.productionValue||0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:Number(user.advances||0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700\",children:Number(user.deductions||0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-700 font-semibold\",children:user.netBonus}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:/*#__PURE__*/_jsx(motion.button,{onClick:()=>handleEditClick(user),whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors duration-300 text-xs sm:text-sm shadow-sm\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644\"})})]},index)),/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-blue-100 font-semibold\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.workDaysPerWeek||0),0)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.totalWorkDays||0),0)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.absences||0),0)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.annualLeave||0),0)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.totalLeaveDays||0),0)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.tieUpValue||0),0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.productionValue||0),0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.advances||0),0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.deductions||0),0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:users.reduce((sum,user)=>sum+Number(user.netBonus||0),0).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{className:\"p-3\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\"})]})]})]})}),/*#__PURE__*/_jsx(motion.button,{onClick:handleSaveReport,disabled:loading||users.length===0,whileHover:{scale:1.05},whileTap:{scale:0.95},className:\"w-full mt-6 bg-stone-700 text-white py-3 rounded-md hover:bg-stone-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-stone-700 \".concat(loading||users.length===0?'opacity-50 cursor-not-allowed':''),children:loading?'جارٍ الحفظ...':'حفظ التقرير'})]}),users.length===0&&!loading&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},className:\"bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-200 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-sm sm:text-base\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0645\\u062A\\u0627\\u062D\\u0629. \\u064A\\u0631\\u062C\\u0649 \\u0627\\u0644\\u0628\\u062D\\u062B \\u0623\\u0648 \\u0639\\u0631\\u0636 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0645\\u0648\\u0638\\u0641\\u064A\\u0646.\"})})]})]});};export default MonthlyBonusReport;","map":{"version":3,"names":["React","useState","useContext","useEffect","useNavigate","AuthContext","NavBar","motion","AnimatePresence","axios","DateTime","XLSX","Document","Packer","Paragraph","Table","TableCell","TableRow","WidthType","TextRun","saveAs","SettingsIcon","jsx","_jsx","jsxs","_jsxs","SuccessCheckmark","_ref","onComplete","div","initial","opacity","scale","animate","transition","duration","exit","onAnimationComplete","className","children","repeat","Infinity","repeatType","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","pathLength","LoadingSpinner","rotate","ease","MonthlyBonusReport","user","navigate","searchCode","setSearchCode","dateFrom","setDateFrom","dateTo","setDateTo","users","setUsers","loading","setLoading","error","setError","showSuccess","setShowSuccess","editingUser","setEditingUser","editForm","setEditForm","role","triggerSuccessAnimation","setTimeout","calculateNetBonus","absences","tieUpValue","productionValue","advances","deductions","baseBonus","Number","bonusPercentage","bonus","dailyBonus","absenceDeduction","adjustedBonus","netBonus","toFixed","handleSearch","startDate","fromISO","zone","endDate","isValid","userRes","fingerprintRes","Promise","all","get","concat","process","env","REACT_APP_API_URL","params","code","headers","Authorization","localStorage","getItem","userData","Array","isArray","data","userFingerprints","reports","combinedData","map","filter","fp","totals","reduce","acc","isWeeklyLeave","workDaysPerWeek","dayOfWeek","date","weekday","isWorkDay","absence","annualLeave","medicalLeave","officialLeave","leaveCompensation","isAbsenceDay","totalWorkDays","totalLeaveDays","_objectSpread","err","_err$response","_err$response$data","errorMsg","response","message","console","handleShowAll","fingerprintData","_err$response2","_err$response2$data","handleEditClick","handleEditChange","e","name","value","target","prev","updatedForm","handleEditSubmit","preventDefault","put","createdBy","_id","u","_err$response3","_err$response3$data","handleEditCancel","handleSaveReport","post","employeeName","department","_err$response4","_err$response4$data","handleExportExcel","worksheet","utils","aoa_to_sheet","wb","book_new","book_append_sheet","wch","writeFile","handleExportWord","doc","sections","properties","page","margin","left","right","top","bottom","text","bold","size","font","rightToLeft","alignment","spacing","after","toLocaleString","DATE_FULL","locale","width","type","PERCENTAGE","rows","header","margins","toString","blob","toBlob","y","onChange","placeholder","disabled","button","onClick","whileHover","whileTap","length","stopPropagation","onSubmit","readOnly","min","step","required","dir","index","sum"],"sources":["/root/app/salary-6/frontend/src/pages/MonthlyBonusReport.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../components/AuthProvider';\nimport NavBar from '../components/NavBar';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport axios from 'axios';\nimport { DateTime } from 'luxon';\nimport * as XLSX from 'xlsx';\nimport { Document, Packer, Paragraph, Table, TableCell, TableRow, WidthType, TextRun } from 'docx';\nimport { saveAs } from 'file-saver';\nimport { SettingsIcon } from 'lucide-react';\n\n// مكون علامة الصح (تم إزالة الخلفية الشفافة)\nconst SuccessCheckmark = ({ onComplete }) => {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.5 }}\n      animate={{ opacity: 1, scale: 1, transition: { duration: 0.5 } }}\n      exit={{ opacity: 0, scale: 0.5 }}\n      onAnimationComplete={onComplete}\n      className=\"fixed inset-0 flex items-center justify-center z-50\"\n    >\n      <motion.div\n        animate={{\n          scale: [1, 1.1, 1],\n          transition: { duration: 1.5, repeat: Infinity, repeatType: 'loop' },\n        }}\n        className=\"bg-gradient-to-br from-green-400 to-emerald-300 p-8 rounded-full shadow-lg w-28 h-28 sm:w-32 sm:h-32 flex items-center justify-center\"\n      >\n        <svg className=\"w-16 h-16 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <motion.path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"3\"\n            d=\"M5 13l4 4L19 7\"\n            initial={{ pathLength: 0 }}\n            animate={{ pathLength: 1, transition: { duration: 0.8 } }}\n          />\n        </svg>\n      </motion.div>\n    </motion.div>\n  );\n};\n\n// مكون مؤشر التحميل\nconst LoadingSpinner = () => (\n  <motion.div\n    initial={{ opacity: 0 }}\n    animate={{ opacity: 1 }}\n    exit={{ opacity: 0 }}\n    className=\"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50\"\n  >\n    <div className=\"relative\">\n      <motion.div\n        className=\"w-12 h-12 sm:w-16 sm:h-16 border-4 border-t-transparent border-sky-400 rounded-full\"\n        animate={{ rotate: 360 }}\n        transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\n      />\n      <span className=\"absolute inset-0 flex items-center justify-center text-gray-200 text-sm sm:text-base\">\n        جارٍ التحميل...\n      </span>\n    </div>\n  </motion.div>\n);\n\nconst MonthlyBonusReport = () => {\n  const { user } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [searchCode, setSearchCode] = useState('');\n  const [dateFrom, setDateFrom] = useState('');\n  const [dateTo, setDateTo] = useState('');\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [editForm, setEditForm] = useState({});\n\n  useEffect(() => {\n    if (!user || user.role !== 'admin') {\n      navigate('/login');\n    }\n  }, [user, navigate]);\n\n  const triggerSuccessAnimation = () => {\n    setShowSuccess(true);\n    setTimeout(() => setShowSuccess(false), 3000);\n  };\n\n  const calculateNetBonus = (user, absences, tieUpValue, productionValue, advances, deductions) => {\n    const baseBonus = Number(user.baseBonus || 0);\n    const bonusPercentage = Number(user.bonusPercentage || 0);\n    const bonus = baseBonus * (bonusPercentage / 100);\n    const dailyBonus = bonus / 30;\n    const absenceDeduction = absences * dailyBonus;\n    const adjustedBonus = bonus - absenceDeduction;\n    const netBonus = adjustedBonus - Number(advances) - Number(deductions) + Number(tieUpValue) + Number(productionValue);\n    return netBonus.toFixed(2);\n  };\n\n  const handleSearch = async () => {\n    if (!searchCode || !dateFrom || !dateTo) {\n      setError('يرجى إدخال كود الموظف وتاريخ البداية والنهاية');\n      return;\n    }\n\n    const startDate = DateTime.fromISO(dateFrom, { zone: 'Africa/Cairo' });\n    const endDate = DateTime.fromISO(dateTo, { zone: 'Africa/Cairo' });\n\n    if (!startDate.isValid || !endDate.isValid) {\n      setError('تاريخ البداية أو النهاية غير صالح');\n      return;\n    }\n\n    if (startDate > endDate) {\n      setError('تاريخ البداية يجب أن يكون قبل تاريخ النهاية');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    try {\n      const [userRes, fingerprintRes] = await Promise.all([\n        axios.get(`${process.env.REACT_APP_API_URL}/api/users`, {\n          params: { code: searchCode },\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n        }),\n        axios.get(`${process.env.REACT_APP_API_URL}/api/fingerprints`, {\n          params: { code: searchCode, dateFrom, dateTo },\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n        }),\n      ]);\n\n      const userData = Array.isArray(userRes.data.users) ? userRes.data.users : [userRes.data];\n      const userFingerprints = fingerprintRes.data.reports || [];\n\n      const combinedData = userData.map((user) => {\n        const userFingerprints = fingerprintRes.data.reports.filter((fp) => fp.code === user.code);\n        const totals = userFingerprints.reduce(\n          (acc, fp) => {\n                \n                    const isWeeklyLeave = (workDaysPerWeek) => {\n  const dayOfWeek = DateTime.fromISO(fp.date, { zone: 'Africa/Cairo' }).weekday;\n  return (\n    (workDaysPerWeek === 5 && (dayOfWeek === 5 || dayOfWeek === 6)) ||\n    (workDaysPerWeek === 6 && dayOfWeek === 5)\n  );\n};\n\n            const isWorkDay =\n              !isWeeklyLeave(user.workDaysPerWeek || 6) &&\n              fp.absence === 'لا' &&\n              fp.annualLeave === 'لا' &&\n              fp.medicalLeave === 'لا' &&\n              fp.officialLeave === 'لا' &&\n              Number(fp.leaveCompensation) === 0;\n            const isAbsenceDay = fp.absence === 'نعم';\n            acc.totalWorkDays += isWorkDay ? 1 : 0;\n            acc.absences += isAbsenceDay ? 1 : 0;\n            acc.annualLeave += fp.annualLeave === 'نعم' ? 1 : 0;\n            acc.totalLeaveDays +=\n              (fp.annualLeave === 'نعم' ? 1 : 0) +\n              (fp.medicalLeave === 'نعم' ? 1 : 0) +\n              (fp.officialLeave === 'نعم' ? 1 : 0) +\n              (Number(fp.leaveCompensation) > 0 ? 1 : 0);\n            return acc;\n          },\n          { totalWorkDays: 0, absences: 0, annualLeave: 0, totalLeaveDays: 0 }\n        );\n\n        return {\n          ...user,\n          totalWorkDays: totals.totalWorkDays,\n          absences: totals.absences,\n          annualLeave: totals.annualLeave,\n          totalLeaveDays: totals.totalLeaveDays,\n          tieUpValue: 0,\n          productionValue: 0,\n          advances: user.advances || 0,\n          deductions: 0,\n          netBonus: calculateNetBonus(user, totals.absences, 0, 0, user.advances || 0, 0),\n        };\n      });\n\n      setUsers(combinedData);\n      triggerSuccessAnimation();\n    } catch (err) {\n      const errorMsg = err.response?.data?.error || err.message;\n      console.error('Error fetching data:', errorMsg);\n      setError(`خطأ أثناء جلب البيانات: ${errorMsg}`);\n      setUsers([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleShowAll = async () => {\n    if (!dateFrom || !dateTo) {\n      setError('يرجى تحديد تاريخ البداية والنهاية');\n      return;\n    }\n\n    const startDate = DateTime.fromISO(dateFrom, { zone: 'Africa/Cairo' });\n    const endDate = DateTime.fromISO(dateTo, { zone: 'Africa/Cairo' });\n\n    if (!startDate.isValid || !endDate.isValid) {\n      setError('تاريخ البداية أو النهاية غير صالح');\n      return;\n    }\n\n    if (startDate > endDate) {\n      setError('تاريخ البداية يجب أن يكون قبل تاريخ النهاية');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    try {\n      const [userRes, fingerprintRes] = await Promise.all([\n        axios.get(`${process.env.REACT_APP_API_URL}/api/users`, {\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n        }),\n        axios.get(`${process.env.REACT_APP_API_URL}/api/fingerprints`, {\n          params: { dateFrom, dateTo },\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n        }),\n      ]);\n\n      const userData = Array.isArray(userRes.data.users) ? userRes.data.users : userRes.data;\n      const fingerprintData = fingerprintRes.data.reports || [];\n\n      const combinedData = userData.map((user) => {\n        const userFingerprints = fingerprintData.filter((fp) => fp.code === user.code);\n        const totals = userFingerprints.reduce(\n          (acc, fp) => {\n            const isWeeklyLeave = (workDaysPerWeek) => {\n              const dayOfWeek = DateTime.fromISO(fp.date, { zone: 'Africa/Cairo' }).weekday;\n              return (\n                (workDaysPerWeek === 5 && (dayOfWeek === 5 || dayOfWeek === 6)) ||\n                (workDaysPerWeek === 6 && dayOfWeek === 5)\n              );\n            };\n            const isWorkDay =\n              !isWeeklyLeave(user.workDaysPerWeek || 6) &&\n              fp.absence === 'لا' &&\n              fp.annualLeave === 'لا' &&\n              fp.medicalLeave === 'لا' &&\n              fp.officialLeave === 'لا' &&\n              Number(fp.leaveCompensation) === 0;\n            const isAbsenceDay = fp.absence === 'نعم';\n            acc.totalWorkDays += isWorkDay ? 1 : 0;\n            acc.absences += isAbsenceDay ? 1 : 0;\n            acc.annualLeave += fp.annualLeave === 'نعم' ? 1 : 0;\n            acc.totalLeaveDays +=\n              (fp.annualLeave === 'نعم' ? 1 : 0) +\n              (fp.medicalLeave === 'نعم' ? 1 : 0) +\n              (fp.officialLeave === 'نعم' ? 1 : 0) +\n              (Number(fp.leaveCompensation) > 0 ? 1 : 0);\n            return acc;\n          },\n          { totalWorkDays: 0, absences: 0, annualLeave: 0, totalLeaveDays: 0 }\n        );\n\n        return {\n          ...user,\n          totalWorkDays: totals.totalWorkDays,\n          absences: totals.absences,\n          annualLeave: totals.annualLeave,\n          totalLeaveDays: totals.totalLeaveDays,\n          tieUpValue: 0,\n          productionValue: 0,\n          advances: user.advances || 0,\n          deductions: 0,\n          netBonus: calculateNetBonus(user, totals.absences, 0, 0, user.advances || 0, 0),\n        };\n      });\n\n      setUsers(combinedData);\n      setSearchCode('');\n      triggerSuccessAnimation();\n    } catch (err) {\n      const errorMsg = err.response?.data?.error || err.message;\n      console.error('Error fetching all data:', errorMsg);\n      setError(`خطأ أثناء جلب جميع البيانات: ${errorMsg}`);\n      setUsers([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditClick = (userData) => {\n    setEditingUser(userData);\n    setEditForm({\n      code: userData.code,\n      tieUpValue: userData.tieUpValue || '0.00',\n      productionValue: userData.productionValue || '0.00',\n      advances: userData.advances || '0.00',\n      deductions: userData.deductions || '0.00',\n      netBonus: calculateNetBonus(\n        userData,\n        userData.absences,\n        userData.tieUpValue || 0,\n        userData.productionValue || 0,\n        userData.advances || 0,\n        userData.deductions || 0\n      ),\n    });\n    setError('');\n  };\n\n  const handleEditChange = (e) => {\n    const { name, value } = e.target;\n    setEditForm((prev) => {\n      const updatedForm = { ...prev, [name]: value };\n      const netBonus = calculateNetBonus(\n        editingUser,\n        editingUser.absences,\n        updatedForm.tieUpValue,\n        updatedForm.productionValue,\n        updatedForm.advances,\n        updatedForm.deductions\n      );\n      return { ...updatedForm, netBonus };\n    });\n  };\n\n  const handleEditSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    try {\n      if (Number(editForm.tieUpValue) < 0) {\n        setError('قيمة التربات لا يمكن أن تكون سالبة');\n        setLoading(false);\n        return;\n      }\n      if (Number(editForm.productionValue) < 0) {\n        setError('قيمة الإنتاج لا يمكن أن تكون سالبة');\n        setLoading(false);\n        return;\n      }\n      if (Number(editForm.advances) < 0) {\n        setError('السلف لا يمكن أن تكون سالبة');\n        setLoading(false);\n        return;\n      }\n      if (Number(editForm.deductions) < 0) {\n        setError('الاستقطاعات لا يمكن أن تكون سالبة');\n        setLoading(false);\n        return;\n      }\n\n      await axios.put(\n        `${process.env.REACT_APP_API_URL}/api/monthly-bonus-report/${editForm.code}`,\n        {\n          code: editForm.code,\n          tieUpValue: Number(editForm.tieUpValue),\n          productionValue: Number(editForm.productionValue),\n          advances: Number(editForm.advances),\n          deductions: Number(editForm.deductions),\n          netBonus: Number(editForm.netBonus),\n          dateFrom,\n          dateTo,\n          createdBy: user._id,\n        },\n        {\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n        }\n      );\n\n      setUsers((prev) =>\n        prev.map((u) =>\n          u.code === editForm.code\n            ? {\n                ...u,\n                tieUpValue: Number(editForm.tieUpValue),\n                productionValue: Number(editForm.productionValue),\n                advances: Number(editForm.advances),\n                deductions: Number(editForm.deductions),\n                netBonus: editForm.netBonus,\n              }\n            : u\n        )\n      );\n\n      setEditingUser(null);\n      triggerSuccessAnimation();\n    } catch (err) {\n      const errorMsg = err.response?.data?.error || err.message;\n      console.error('Error updating report:', errorMsg);\n      setError(`خطأ أثناء التعديل: ${errorMsg}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditCancel = () => {\n    setEditingUser(null);\n    setEditForm({});\n    setError('');\n  };\n\n  const handleSaveReport = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      await Promise.all(\n        users.map((user) =>\n          axios.post(\n            `${process.env.REACT_APP_API_URL}/api/monthly-bonus-report`,\n            {\n              code: user.code,\n              employeeName: user.employeeName,\n              department: user.department,\n              baseBonus: Number(user.baseBonus),\n              bonusPercentage: Number(user.bonusPercentage),\n              workDaysPerWeek: Number(user.workDaysPerWeek),\n              totalWorkDays: Number(user.totalWorkDays),\n              absences: Number(user.absences),\n              annualLeave: Number(user.annualLeave),\n              totalLeaveDays: Number(user.totalLeaveDays),\n              tieUpValue: Number(user.tieUpValue),\n              productionValue: Number(user.productionValue),\n              advances: Number(user.advances),\n              deductions: Number(user.deductions),\n              netBonus: Number(user.netBonus),\n              dateFrom,\n              dateTo,\n              createdBy: user._id,\n            },\n            {\n              headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\n            }\n          )\n        )\n      );\n      triggerSuccessAnimation();\n    } catch (err) {\n      const errorMsg = err.response?.data?.error || err.message;\n      console.error('Error saving report:', errorMsg);\n      setError(`خطأ أثناء حفظ التقرير: ${errorMsg}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleExportExcel = () => {\n    const headers = [\n      'كود الموظف',\n      'الاسم',\n      'القسم',\n      'الحافز الأساسي',\n      'نسبة الحافز',\n      'أيام العمل الأسبوعية',\n      'إجمالي أيام العمل',\n      'الغياب',\n      'الإجازة السنوية',\n      'إجمالي الإجازات',\n      'قيمة التربات',\n      'قيمة الإنتاج',\n      'السلف',\n      'الاستقطاعات',\n      'صافي الحافز',\n    ];\n\n    const data = users.map((user) => [\n      user.code,\n      user.employeeName,\n      user.department,\n      Number(user.baseBonus || 0).toFixed(2),\n      `${Number(user.bonusPercentage || 0).toFixed(2)}%`,\n      user.workDaysPerWeek,\n      user.totalWorkDays,\n      user.absences,\n      user.annualLeave,\n      user.totalLeaveDays,\n      Number(user.tieUpValue || 0).toFixed(2),\n      Number(user.productionValue || 0).toFixed(2),\n      Number(user.advances || 0).toFixed(2),\n      Number(user.deductions || 0).toFixed(2),\n      user.netBonus,\n    ]);\n\n    const worksheet = XLSX.utils.aoa_to_sheet([headers, ...data]);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, worksheet, 'تقرير الحافز الشهري');\n\n    worksheet['!cols'] = headers.map(() => ({ wch: 15 }));\n    worksheet['!rtl'] = true;\n\n    XLSX.writeFile(wb, `تقرير_الحافز_الشهري_${dateFrom}_إلى_${dateTo}.xlsx`);\n  };\n\n  const handleExportWord = async () => {\n    const doc = new Document({\n      sections: [\n        {\n          properties: { page: { margin: { left: 720, right: 720, top: 720, bottom: 720 } } },\n          children: [\n            new Paragraph({\n              children: [\n                new TextRun({\n                  text: 'تقرير الحافز الشهري',\n                  bold: true,\n                  size: 24,\n                  font: 'Amiri',\n                  rightToLeft: true,\n                }),\n              ],\n              alignment: 'right',\n              spacing: { after: 200 },\n            }),\n            new Paragraph({\n              children: [\n                new TextRun({\n                  text: `التاريخ: من ${DateTime.fromISO(dateFrom).toLocaleString(DateTime.DATE_FULL, { locale: 'ar' })} إلى ${DateTime.fromISO(dateTo).toLocaleString(DateTime.DATE_FULL, { locale: 'ar' })}`,\n                  size: 20,\n                  font: 'Amiri',\n                  rightToLeft: true,\n                }),\n              ],\n              alignment: 'right',\n              spacing: { after: 400 },\n            }),\n            new Table({\n              width: { size: 100, type: WidthType.PERCENTAGE },\n              rows: [\n                new TableRow({\n                  children: [\n                    'كود الموظف',\n                    'الاسم',\n                    'القسم',\n                    'الحافز الأساسي',\n                    'نسبة الحافز',\n                    'أيام العمل الأسبوعية',\n                    'إجمالي أيام العمل',\n                    'الغياب',\n                    'الإجازة السنوية',\n                    'إجمالي الإجازات',\n                    'قيمة التربات',\n                    'قيمة الإنتاج',\n                    'السلف',\n                    'الاستقطاعات',\n                    'صافي الحافز',\n                  ].map(\n                    (header) =>\n                      new TableCell({\n                        children: [\n                          new Paragraph({\n                            children: [new TextRun({ text: header, bold: true, font: 'Amiri', size: 20, rightToLeft: true })],\n                            alignment: 'center',\n                          }),\n                        ],\n                        width: { size: 100 / 15, type: WidthType.PERCENTAGE },\n                        margins: { top: 100, bottom: 100, left: 100, right: 100 },\n                      })\n                  ),\n                }),\n                ...users.map(\n                  (user) =>\n                    new TableRow({\n                      children: [\n                        user.code,\n                        user.employeeName,\n                        user.department,\n                        Number(user.baseBonus || 0).toFixed(2),\n                        `${Number(user.bonusPercentage || 0).toFixed(2)}%`,\n                        user.workDaysPerWeek.toString(),\n                        user.totalWorkDays.toString(),\n                        user.absences.toString(),\n                        user.annualLeave.toString(),\n                        user.totalLeaveDays.toString(),\n                        Number(user.tieUpValue || 0).toFixed(2),\n                        Number(user.productionValue || 0).toFixed(2),\n                        Number(user.advances || 0).toFixed(2),\n                        Number(user.deductions || 0).toFixed(2),\n                        user.netBonus,\n                      ].map(\n                        (text) =>\n                          new TableCell({\n                            children: [\n                              new Paragraph({\n                                children: [new TextRun({ text, font: 'Amiri', size: 20, rightToLeft: true })],\n                                alignment: 'center',\n                              }),\n                            ],\n                            width: { size: 100 / 15, type: WidthType.PERCENTAGE },\n                            margins: { top: 100, bottom: 100, left: 100, right: 100 },\n                          })\n                      ),\n                    })\n                ),\n              ],\n            }),\n          ],\n        },\n      ],\n    });\n\n    const blob = await Packer.toBlob(doc);\n    saveAs(blob, `تقرير_الحافز_الشهري_${dateFrom}_إلى_${dateTo}.docx`);\n  };\n\n  if (!user || user.role !== 'admin') return null;\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col\">\n      <NavBar />\n      <div className=\"container mx-auto p-4 sm:p-6 max-w-full\">\n        <AnimatePresence>\n          {loading && <LoadingSpinner />}\n        </AnimatePresence>\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-200 mb-4 sm:mb-6\"\n        >\n          <h2 className=\"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-right flex items-center gap-2\">\n            <SettingsIcon className=\"h-6 w-6 text-blue-500\" />\n            تقرير الحافز الشهري\n          </h2>\n          {error && (\n            <motion.div\n              initial={{ opacity: 0, y: -20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"bg-red-50 text-red-600 p-3 sm:p-4 rounded-lg mb-4 sm:mb-6 text-right text-sm sm:text-base\"\n            >\n              {error}\n            </motion.div>\n          )}\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                كود الموظف\n              </label>\n              <input\n                type=\"text\"\n                value={searchCode}\n                onChange={(e) => setSearchCode(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\"\n                placeholder=\"أدخل كود الموظف\"\n                disabled={loading}\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                من تاريخ\n              </label>\n              <input\n                type=\"date\"\n                value={dateFrom}\n                onChange={(e) => setDateFrom(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\"\n                disabled={loading}\n              />\n            </div>\n            <div>\n              <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                إلى تاريخ\n              </label>\n              <input\n                type=\"date\"\n                value={dateTo}\n                onChange={(e) => setDateTo(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\"\n                disabled={loading}\n              />\n            </div>\n          </div>\n          <div className=\"flex flex-wrap justify-end gap-2 sm:gap-4 mt-4\">\n            <motion.button\n              onClick={handleSearch}\n              disabled={loading}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              className={`w-full sm:w-auto bg-stone-700 text-white px-4 py-2 rounded-md hover:bg-stone-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-stone-700 ${\n                loading ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              {loading ? 'جارٍ البحث...' : 'بحث'}\n            </motion.button>\n            <motion.button\n              onClick={handleShowAll}\n              disabled={loading}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              className={`w-full sm:w-auto bg-zinc-600 text-white px-4 py-2 rounded-md hover:bg-zinc-700 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-zinc-600 ${\n                loading ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              {loading ? 'جارٍ الجلب...' : 'عرض الكل'}\n            </motion.button>\n            <motion.button\n              onClick={handleExportExcel}\n              disabled={loading || users.length === 0}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              className={`w-full sm:w-auto bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-green-500 ${\n                loading || users.length === 0 ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              تصدير إكسل\n            </motion.button>\n            <motion.button\n              onClick={handleExportWord}\n              disabled={loading || users.length === 0}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              className={`w-full sm:w-auto bg-blue-700 text-white px-4 py-2 rounded-md hover:bg-blue-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-blue-700 ${\n                loading || users.length === 0 ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              تصدير وورد\n            </motion.button>\n          </div>\n        </motion.div>\n\n        <AnimatePresence>\n          {editingUser && (\n            <motion.div\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.8 }}\n              className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n            >\n              <motion.div\n                className=\"bg-white p-4 sm:p-6 rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <h2 className=\"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-right flex items-center gap-2\">\n                  <SettingsIcon className=\"h-6 w-6 text-blue-500\" />\n                  تعديل بيانات التقرير\n                </h2>\n                {error && (\n                  <motion.div\n                    initial={{ opacity: 0, y: -20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"bg-red-50 text-red-600 p-3 sm:p-4 rounded-lg mb-4 text-right text-sm sm:text-base\"\n                  >\n                    {error}\n                  </motion.div>\n                )}\n                <form onSubmit={handleEditSubmit} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                      كود الموظف\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"code\"\n                      value={editForm.code}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300 bg-gray-100\"\n                      readOnly\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                      قيمة التربات\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"tieUpValue\"\n                      value={editForm.tieUpValue}\n                      onChange={handleEditChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      required\n                      disabled={loading}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                      قيمة الإنتاج\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"productionValue\"\n                      value={editForm.productionValue}\n                      onChange={handleEditChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      required\n                      disabled={loading}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                      السلف\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"advances\"\n                      value={editForm.advances}\n                      onChange={handleEditChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      required\n                      disabled={loading}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                      الاستقطاعات\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"deductions\"\n                      value={editForm.deductions}\n                      onChange={handleEditChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      required\n                      disabled={loading}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-medium mb-2 text-right\">\n                      الصافي\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={editForm.netBonus}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-right text-sm focus:ring-2 focus:ring-sky-300 bg-gray-100\"\n                      readOnly\n                    />\n                  </div>\n                  <div className=\"flex flex-wrap justify-end gap-2 sm:gap-4\">\n                    <motion.button\n                      type=\"submit\"\n                      disabled={loading}\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                      className={`w-full sm:w-auto bg-stone-700 text-white px-4 py-2 rounded-md hover:bg-stone-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-stone-700 ${\n                        loading ? 'opacity-50 cursor-not-allowed' : ''\n                      }`}\n                    >\n                      {loading ? 'جارٍ الحفظ...' : 'حفظ'}\n                    </motion.button>\n                    <motion.button\n                      type=\"button\"\n                      onClick={handleEditCancel}\n                      disabled={loading}\n                      whileHover={{ scale: 1.05 }}\n                      whileTap={{ scale: 0.95 }}\n                      className={`w-full sm:w-auto bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-gray-500 ${\n                        loading ? 'opacity-50 cursor-not-allowed' : ''\n                      }`}\n                    >\n                      إلغاء\n                    </motion.button>\n                  </div>\n                </form>\n              </motion.div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        <AnimatePresence>\n          {showSuccess && <SuccessCheckmark onComplete={() => setShowSuccess(false)} />}\n        </AnimatePresence>\n\n        {users.length > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.5 }}\n            className=\"bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-200\"\n          >\n            <h2 className=\"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-right\">تقرير الحافز الشهري</h2>\n            <div className=\"overflow-x-auto rounded-lg shadow-sm\">\n              <table className=\"w-full text-right text-xs sm:text-sm border-collapse\" dir=\"rtl\">\n                <thead>\n                  <tr className=\"bg-gradient-to-r from-blue-600 to-blue-400 text-white\">\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">كود الموظف</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">الاسم</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">القسم</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">الحافز الأساسي</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">نسبة الحافز</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">أيام العمل الأسبوعية</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">إجمالي أيام العمل</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">الغياب</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">الإجازة السنوية</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">إجمالي الإجازات</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">قيمة التربات</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">قيمة الإنتاج</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">السلف</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">الاستقطاعات</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">صافي الحافز</th>\n                    <th className=\"p-3 font-semibold text-sm sm:text-base border-b border-gray-200\">إجراءات</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {users.map((user, index) => (\n                    <tr\n                      key={index}\n                      className={`${\n                        index % 2 === 0 ? 'bg-gray-50' : 'bg-white'\n                      } hover:bg-blue-50 transition-colors duration-200 border-b border-gray-100`}\n                    >\n                      <td className=\"p-3 text-gray-700\">{user.code}</td>\n                      <td className=\"p-3 text-gray-700\">{user.employeeName}</td>\n                      <td className=\"p-3 text-gray-700\">{user.department}</td>\n                      <td className=\"p-3 text-gray-700\">{Number(user.baseBonus || 0).toFixed(2)}</td>\n                      <td className=\"p-3 text-gray-700\">{Number(user.bonusPercentage || 0).toFixed(2)}%</td>\n                      <td className=\"p-3 text-gray-700\">{user.workDaysPerWeek}</td>\n                      <td className=\"p-3 text-gray-700\">{user.totalWorkDays}</td>\n                      <td className=\"p-3 text-gray-700\">{user.absences}</td>\n                      <td className=\"p-3 text-gray-700\">{user.annualLeave}</td>\n                      <td className=\"p-3 text-gray-700\">{user.totalLeaveDays}</td>\n                      <td className=\"p-3 text-gray-700\">{Number(user.tieUpValue || 0).toFixed(2)}</td>\n                      <td className=\"p-3 text-gray-700\">{Number(user.productionValue || 0).toFixed(2)}</td>\n                      <td className=\"p-3 text-gray-700\">{Number(user.advances || 0).toFixed(2)}</td>\n                      <td className=\"p-3 text-gray-700\">{Number(user.deductions || 0).toFixed(2)}</td>\n                      <td className=\"p-3 text-gray-700 font-semibold\">{user.netBonus}</td>\n                      <td className=\"p-3\">\n                        <motion.button\n                          onClick={() => handleEditClick(user)}\n                          whileHover={{ scale: 1.05 }}\n                          whileTap={{ scale: 0.95 }}\n                          className=\"bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 transition-colors duration-300 text-xs sm:text-sm shadow-sm\"\n                        >\n                          تعديل\n                        </motion.button>\n                      </td>\n                    </tr>\n                  ))}\n                  <tr className=\"bg-blue-100 font-semibold\">\n                    <td className=\"p-3\">-</td>\n                    <td className=\"p-3\">-</td>\n                    <td className=\"p-3\">-</td>\n                    <td className=\"p-3\">-</td>\n                    <td className=\"p-3\">-</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.workDaysPerWeek || 0), 0)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.totalWorkDays || 0), 0)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.absences || 0), 0)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.annualLeave || 0), 0)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.totalLeaveDays || 0), 0)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.tieUpValue || 0), 0).toFixed(2)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.productionValue || 0), 0).toFixed(2)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.advances || 0), 0).toFixed(2)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.deductions || 0), 0).toFixed(2)}</td>\n                    <td className=\"p-3\">{users.reduce((sum, user) => sum + Number(user.netBonus || 0), 0).toFixed(2)}</td>\n                    <td className=\"p-3\">الإجمالي</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <motion.button\n              onClick={handleSaveReport}\n              disabled={loading || users.length === 0}\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              className={`w-full mt-6 bg-stone-700 text-white py-3 rounded-md hover:bg-stone-800 transition-colors duration-300 text-sm sm:text-base shadow-sm ring-1 ring-offset-1 ring-stone-700 ${\n                loading || users.length === 0 ? 'opacity-50 cursor-not-allowed' : ''\n              }`}\n            >\n              {loading ? 'جارٍ الحفظ...' : 'حفظ التقرير'}\n            </motion.button>\n          </motion.div>\n        )}\n\n        {users.length === 0 && !loading && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"bg-white p-4 sm:p-6 rounded-xl shadow-md border border-gray-200 text-center\"\n          >\n            <p className=\"text-gray-700 text-sm sm:text-base\">لا توجد بيانات متاحة. يرجى البحث أو عرض جميع الموظفين.</p>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MonthlyBonusReport;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}